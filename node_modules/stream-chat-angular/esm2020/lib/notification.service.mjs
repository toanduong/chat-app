import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import * as i0 from "@angular/core";
/**
 * The `NotificationService` can be used to add or remove notifications. By default the [`NotificationList`](/chat/docs/sdk/angular/components/NotificationListComponent/) component displays the currently active notifications.
 */
export class NotificationService {
    constructor() {
        this.notificationsSubject = new BehaviorSubject([]);
        this.notifications$ = this.notificationsSubject.asObservable();
    }
    /**
     * Displays a notification for the given amount of time.
     * @param content The text of the notification or the HTML template for the notification
     * @param type The type of the notification
     * @param timeout The number of milliseconds while the notification should be visible
     * @param translateParams Translation parameters for the `content` (for text notifications)
     * @param templateContext The input of the notification template (for HTML notifications)
     * @returns A method to clear the notification (before the timeout).
     */
    addTemporaryNotification(content, type = 'error', timeout = 5000, translateParams, templateContext) {
        const notification = this.createNotification(content, type, translateParams, templateContext);
        const id = setTimeout(() => this.removeNotification(notification.id), timeout);
        notification.dismissFn = () => {
            clearTimeout(id);
            this.removeNotification(notification.id);
        };
        this.notificationsSubject.next([
            ...this.notificationsSubject.getValue(),
            notification,
        ]);
        return notification.dismissFn;
    }
    /**
     * Displays a notification, that will be visible until it's removed.
     * @param content The text of the notification or the HTML template for the notification
     * @param type The type of the notification
     * @param translateParams Translation parameters for the `content` (for text notifications)
     * @param templateContext The input of the notification template (for HTML notifications)
     * @returns A method to clear the notification.
     */
    addPermanentNotification(content, type = 'error', translateParams, templateContext) {
        const notification = this.createNotification(content, type, translateParams, templateContext);
        this.notificationsSubject.next([
            ...this.notificationsSubject.getValue(),
            notification,
        ]);
        return notification.dismissFn;
    }
    createNotification(content, type, translateParams, templateContext) {
        const id = new Date().getTime().toString() + Math.random().toString();
        return {
            id,
            [typeof content === 'string' ? 'text' : 'template']: content,
            type,
            translateParams,
            templateContext: templateContext ?? {},
            dismissFn: () => this.removeNotification(id),
        };
    }
    removeNotification(id) {
        const notifications = this.notificationsSubject.getValue();
        const index = notifications.findIndex((n) => n.id === id);
        if (index === -1) {
            return;
        }
        notifications.splice(index, 1);
        this.notificationsSubject.next([...notifications]);
    }
}
NotificationService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.0.4", ngImport: i0, type: NotificationService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
NotificationService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "15.0.4", ngImport: i0, type: NotificationService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.0.4", ngImport: i0, type: NotificationService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: function () { return []; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9zdHJlYW0tY2hhdC1hbmd1bGFyL3NyYy9saWIvbm90aWZpY2F0aW9uLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUN4RCxPQUFPLEVBQUUsZUFBZSxFQUFjLE1BQU0sTUFBTSxDQUFDOztBQUduRDs7R0FFRztBQUlILE1BQU0sT0FBTyxtQkFBbUI7SUFPOUI7UUFGUSx5QkFBb0IsR0FBRyxJQUFJLGVBQWUsQ0FBd0IsRUFBRSxDQUFDLENBQUM7UUFHNUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDakUsQ0FBQztJQUVEOzs7Ozs7OztPQVFHO0lBQ0gsd0JBQXdCLENBQ3RCLE9BQWdDLEVBQ2hDLE9BQXlCLE9BQU8sRUFDaEMsVUFBa0IsSUFBSSxFQUN0QixlQUF3QixFQUN4QixlQUFtQjtRQUVuQixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQzFDLE9BQU8sRUFDUCxJQUFJLEVBQ0osZUFBZSxFQUNmLGVBQWUsQ0FDaEIsQ0FBQztRQUNGLE1BQU0sRUFBRSxHQUFHLFVBQVUsQ0FDbkIsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsRUFDOUMsT0FBTyxDQUNSLENBQUM7UUFDRixZQUFZLENBQUMsU0FBUyxHQUFHLEdBQUcsRUFBRTtZQUM1QixZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDakIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUM7UUFDRixJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDO1lBQzdCLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsRUFBRTtZQUN2QyxZQUFZO1NBQ2IsQ0FBQyxDQUFDO1FBRUgsT0FBTyxZQUFZLENBQUMsU0FBUyxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsd0JBQXdCLENBQ3RCLE9BQWdDLEVBQ2hDLE9BQXlCLE9BQU8sRUFDaEMsZUFBd0IsRUFDeEIsZUFBbUI7UUFFbkIsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUMxQyxPQUFPLEVBQ1AsSUFBSSxFQUNKLGVBQWUsRUFDZixlQUFlLENBQ2hCLENBQUM7UUFDRixJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDO1lBQzdCLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsRUFBRTtZQUN2QyxZQUFZO1NBQ2IsQ0FBQyxDQUFDO1FBRUgsT0FBTyxZQUFZLENBQUMsU0FBUyxDQUFDO0lBQ2hDLENBQUM7SUFFTyxrQkFBa0IsQ0FDeEIsT0FBZ0MsRUFDaEMsSUFBc0IsRUFDdEIsZUFBd0IsRUFDeEIsZUFBbUI7UUFFbkIsTUFBTSxFQUFFLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDdEUsT0FBTztZQUNMLEVBQUU7WUFDRixDQUFDLE9BQU8sT0FBTyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsRUFBRSxPQUFPO1lBQzVELElBQUk7WUFDSixlQUFlO1lBQ2YsZUFBZSxFQUFFLGVBQWUsSUFBSSxFQUFFO1lBQ3RDLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsRUFBRSxDQUFDO1NBQzdDLENBQUM7SUFDSixDQUFDO0lBRU8sa0JBQWtCLENBQUMsRUFBVTtRQUNuQyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDM0QsTUFBTSxLQUFLLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUMxRCxJQUFJLEtBQUssS0FBSyxDQUFDLENBQUMsRUFBRTtZQUNoQixPQUFPO1NBQ1I7UUFDRCxhQUFhLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBQ3JELENBQUM7O2dIQXRHVSxtQkFBbUI7b0hBQW5CLG1CQUFtQixjQUZsQixNQUFNOzJGQUVQLG1CQUFtQjtrQkFIL0IsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25QYXlsb2FkLCBOb3RpZmljYXRpb25UeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogVGhlIGBOb3RpZmljYXRpb25TZXJ2aWNlYCBjYW4gYmUgdXNlZCB0byBhZGQgb3IgcmVtb3ZlIG5vdGlmaWNhdGlvbnMuIEJ5IGRlZmF1bHQgdGhlIFtgTm90aWZpY2F0aW9uTGlzdGBdKC9jaGF0L2RvY3Mvc2RrL2FuZ3VsYXIvY29tcG9uZW50cy9Ob3RpZmljYXRpb25MaXN0Q29tcG9uZW50LykgY29tcG9uZW50IGRpc3BsYXlzIHRoZSBjdXJyZW50bHkgYWN0aXZlIG5vdGlmaWNhdGlvbnMuXG4gKi9cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxufSlcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25TZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEVtaXRzIHRoZSBjdXJyZW50bHkgYWN0aXZlIFtub3RpZmljYXRpb25zXShodHRwczovL2dpdGh1Yi5jb20vR2V0U3RyZWFtL3N0cmVhbS1jaGF0LWFuZ3VsYXIvYmxvYi9tYXN0ZXIvcHJvamVjdHMvc3RyZWFtLWNoYXQtYW5ndWxhci9zcmMvbGliL25vdGlmaWNhdGlvbi5zZXJ2aWNlLnRzKS5cbiAgICovXG4gIG5vdGlmaWNhdGlvbnMkOiBPYnNlcnZhYmxlPE5vdGlmaWNhdGlvblBheWxvYWRbXT47XG4gIHByaXZhdGUgbm90aWZpY2F0aW9uc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PE5vdGlmaWNhdGlvblBheWxvYWRbXT4oW10pO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubm90aWZpY2F0aW9ucyQgPSB0aGlzLm5vdGlmaWNhdGlvbnNTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXlzIGEgbm90aWZpY2F0aW9uIGZvciB0aGUgZ2l2ZW4gYW1vdW50IG9mIHRpbWUuXG4gICAqIEBwYXJhbSBjb250ZW50IFRoZSB0ZXh0IG9mIHRoZSBub3RpZmljYXRpb24gb3IgdGhlIEhUTUwgdGVtcGxhdGUgZm9yIHRoZSBub3RpZmljYXRpb25cbiAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIG5vdGlmaWNhdGlvblxuICAgKiBAcGFyYW0gdGltZW91dCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB3aGlsZSB0aGUgbm90aWZpY2F0aW9uIHNob3VsZCBiZSB2aXNpYmxlXG4gICAqIEBwYXJhbSB0cmFuc2xhdGVQYXJhbXMgVHJhbnNsYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIGBjb250ZW50YCAoZm9yIHRleHQgbm90aWZpY2F0aW9ucylcbiAgICogQHBhcmFtIHRlbXBsYXRlQ29udGV4dCBUaGUgaW5wdXQgb2YgdGhlIG5vdGlmaWNhdGlvbiB0ZW1wbGF0ZSAoZm9yIEhUTUwgbm90aWZpY2F0aW9ucylcbiAgICogQHJldHVybnMgQSBtZXRob2QgdG8gY2xlYXIgdGhlIG5vdGlmaWNhdGlvbiAoYmVmb3JlIHRoZSB0aW1lb3V0KS5cbiAgICovXG4gIGFkZFRlbXBvcmFyeU5vdGlmaWNhdGlvbjxUPihcbiAgICBjb250ZW50OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxUPixcbiAgICB0eXBlOiBOb3RpZmljYXRpb25UeXBlID0gJ2Vycm9yJyxcbiAgICB0aW1lb3V0OiBudW1iZXIgPSA1MDAwLFxuICAgIHRyYW5zbGF0ZVBhcmFtcz86IG9iamVjdCxcbiAgICB0ZW1wbGF0ZUNvbnRleHQ/OiBUXG4gICkge1xuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uPFQ+KFxuICAgICAgY29udGVudCxcbiAgICAgIHR5cGUsXG4gICAgICB0cmFuc2xhdGVQYXJhbXMsXG4gICAgICB0ZW1wbGF0ZUNvbnRleHRcbiAgICApO1xuICAgIGNvbnN0IGlkID0gc2V0VGltZW91dChcbiAgICAgICgpID0+IHRoaXMucmVtb3ZlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbi5pZCksXG4gICAgICB0aW1lb3V0XG4gICAgKTtcbiAgICBub3RpZmljYXRpb24uZGlzbWlzc0ZuID0gKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgIHRoaXMucmVtb3ZlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbi5pZCk7XG4gICAgfTtcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNTdWJqZWN0Lm5leHQoW1xuICAgICAgLi4udGhpcy5ub3RpZmljYXRpb25zU3ViamVjdC5nZXRWYWx1ZSgpLFxuICAgICAgbm90aWZpY2F0aW9uLFxuICAgIF0pO1xuXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbi5kaXNtaXNzRm47XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheXMgYSBub3RpZmljYXRpb24sIHRoYXQgd2lsbCBiZSB2aXNpYmxlIHVudGlsIGl0J3MgcmVtb3ZlZC5cbiAgICogQHBhcmFtIGNvbnRlbnQgVGhlIHRleHQgb2YgdGhlIG5vdGlmaWNhdGlvbiBvciB0aGUgSFRNTCB0ZW1wbGF0ZSBmb3IgdGhlIG5vdGlmaWNhdGlvblxuICAgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSBvZiB0aGUgbm90aWZpY2F0aW9uXG4gICAqIEBwYXJhbSB0cmFuc2xhdGVQYXJhbXMgVHJhbnNsYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIGBjb250ZW50YCAoZm9yIHRleHQgbm90aWZpY2F0aW9ucylcbiAgICogQHBhcmFtIHRlbXBsYXRlQ29udGV4dCBUaGUgaW5wdXQgb2YgdGhlIG5vdGlmaWNhdGlvbiB0ZW1wbGF0ZSAoZm9yIEhUTUwgbm90aWZpY2F0aW9ucylcbiAgICogQHJldHVybnMgQSBtZXRob2QgdG8gY2xlYXIgdGhlIG5vdGlmaWNhdGlvbi5cbiAgICovXG4gIGFkZFBlcm1hbmVudE5vdGlmaWNhdGlvbjxUID0gb2JqZWN0PihcbiAgICBjb250ZW50OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxUPixcbiAgICB0eXBlOiBOb3RpZmljYXRpb25UeXBlID0gJ2Vycm9yJyxcbiAgICB0cmFuc2xhdGVQYXJhbXM/OiBvYmplY3QsXG4gICAgdGVtcGxhdGVDb250ZXh0PzogVFxuICApIHtcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbjxUPihcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0eXBlLFxuICAgICAgdHJhbnNsYXRlUGFyYW1zLFxuICAgICAgdGVtcGxhdGVDb250ZXh0XG4gICAgKTtcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNTdWJqZWN0Lm5leHQoW1xuICAgICAgLi4udGhpcy5ub3RpZmljYXRpb25zU3ViamVjdC5nZXRWYWx1ZSgpLFxuICAgICAgbm90aWZpY2F0aW9uLFxuICAgIF0pO1xuXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbi5kaXNtaXNzRm47XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU5vdGlmaWNhdGlvbjxUPihcbiAgICBjb250ZW50OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxUPixcbiAgICB0eXBlOiBOb3RpZmljYXRpb25UeXBlLFxuICAgIHRyYW5zbGF0ZVBhcmFtcz86IG9iamVjdCxcbiAgICB0ZW1wbGF0ZUNvbnRleHQ/OiBUXG4gICkge1xuICAgIGNvbnN0IGlkID0gbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICBbdHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnID8gJ3RleHQnIDogJ3RlbXBsYXRlJ106IGNvbnRlbnQsXG4gICAgICB0eXBlLFxuICAgICAgdHJhbnNsYXRlUGFyYW1zLFxuICAgICAgdGVtcGxhdGVDb250ZXh0OiB0ZW1wbGF0ZUNvbnRleHQgPz8ge30sXG4gICAgICBkaXNtaXNzRm46ICgpID0+IHRoaXMucmVtb3ZlTm90aWZpY2F0aW9uKGlkKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVOb3RpZmljYXRpb24oaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSB0aGlzLm5vdGlmaWNhdGlvbnNTdWJqZWN0LmdldFZhbHVlKCk7XG4gICAgY29uc3QgaW5kZXggPSBub3RpZmljYXRpb25zLmZpbmRJbmRleCgobikgPT4gbi5pZCA9PT0gaWQpO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbm90aWZpY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMubm90aWZpY2F0aW9uc1N1YmplY3QubmV4dChbLi4ubm90aWZpY2F0aW9uc10pO1xuICB9XG59XG4iXX0=