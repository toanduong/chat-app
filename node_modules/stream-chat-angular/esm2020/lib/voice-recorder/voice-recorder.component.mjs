import { Component, Input, } from '@angular/core';
import { MediaRecordingState } from './media-recorder';
import * as i0 from "@angular/core";
import * as i1 from "./audio-recorder.service";
import * as i2 from "@angular/common";
import * as i3 from "../voice-recording/voice-recording.component";
import * as i4 from "../icon/icon-placeholder/icon-placeholder.component";
import * as i5 from "../icon/loading-indicator/loading-indicator.component";
import * as i6 from "./voice-recorder-wavebar/voice-recorder-wavebar.component";
/**
 * The `VoiceRecorderComponent` makes it possible to record audio, and then upload it as a voice recording attachment
 */
export class VoiceRecorderComponent {
    constructor(recorder) {
        this.recorder = recorder;
        this.recordState = MediaRecordingState.STOPPED;
        this.isLoading = false;
        this.MediaRecordingState = MediaRecordingState;
        this.subscriptions = [];
    }
    ngOnInit() {
        this.subscriptions.push(this.recorder.recordingState$.subscribe((s) => {
            this.recordState = s;
            if (this.recordState === MediaRecordingState.ERROR) {
                this.voiceRecorderService?.isRecorderVisible$.next(false);
            }
        }));
    }
    ngOnChanges(changes) {
        if (changes.voiceRecorderService && this.voiceRecorderService) {
            this.isVisibleSubscription =
                this.voiceRecorderService.isRecorderVisible$.subscribe((isVisible) => {
                    if (!isVisible) {
                        this.recording = undefined;
                        this.isLoading = false;
                    }
                });
        }
        else {
            this.isVisibleSubscription?.unsubscribe();
        }
    }
    ngOnDestroy() {
        this.subscriptions.forEach((s) => s.unsubscribe());
    }
    cancel() {
        if (this.recording) {
            this.recording = undefined;
        }
        else {
            void this.recorder.stop({ cancel: true });
        }
        this.voiceRecorderService?.isRecorderVisible$.next(false);
    }
    async stop() {
        this.recording = await this.recorder.stop();
    }
    pause() {
        this.recorder.pause();
    }
    resume() {
        this.recorder.resume();
    }
    uploadRecording() {
        if (!this.recording) {
            return;
        }
        this.isLoading = true;
        this.voiceRecorderService?.recording$.next(this.recording);
    }
}
VoiceRecorderComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.0.4", ngImport: i0, type: VoiceRecorderComponent, deps: [{ token: i1.AudioRecorderService }], target: i0.ɵɵFactoryTarget.Component });
VoiceRecorderComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.0.4", type: VoiceRecorderComponent, selector: "stream-voice-recorder", inputs: { voiceRecorderService: "voiceRecorderService" }, providers: [], usesOnChanges: true, ngImport: i0, template: "<div\n  class=\"str-chat__audio_recorder-container\"\n  *ngIf=\"voiceRecorderService?.isRecorderVisible$ | async\"\n>\n  <div class=\"str-chat__audio_recorder\" data-testid=\"audio-recorder\">\n    <button\n      class=\"str-chat__audio_recorder__cancel-button\"\n      data-testid=\"cancel-recording-audio-button\"\n      [disabled]=\"isLoading\"\n      (click)=\"cancel()\"\n      (keyup.enter)=\"cancel()\"\n    >\n      <stream-icon-placeholder icon=\"bin\"></stream-icon-placeholder>\n    </button>\n    <stream-voice-recorder-wavebar\n      *ngIf=\"\n        (recordState === MediaRecordingState.RECORDING ||\n          recordState === MediaRecordingState.PAUSED) &&\n        !recording\n      \"\n    ></stream-voice-recorder-wavebar>\n    <!-- eslint-disable @angular-eslint/template/no-any -->\n    <stream-voice-recording\n      [attachment]=\"$any(recording)\"\n      *ngIf=\"!!recording\"\n    ></stream-voice-recording>\n    <!-- eslint-enable @angular-eslint/template/no-any -->\n    <button\n      *ngIf=\"recordState === MediaRecordingState.PAUSED && !recording\"\n      class=\"str-chat__audio_recorder__resume-recording-button\"\n      (click)=\"resume()\"\n      (keyup.enter)=\"resume()\"\n    >\n      <stream-icon-placeholder icon=\"mic\"></stream-icon-placeholder>\n    </button>\n    <button\n      *ngIf=\"recordState === MediaRecordingState.RECORDING && !recording\"\n      class=\"str-chat__audio_recorder__pause-recording-button\"\n      data-testid=\"pause-recording-audio-button\"\n      (click)=\"pause()\"\n      (keyup.enter)=\"pause()\"\n    >\n      <stream-icon-placeholder icon=\"pause\"></stream-icon-placeholder>\n    </button>\n    <ng-container\n      *ngIf=\"recordState === MediaRecordingState.STOPPED; else stopButton\"\n    >\n      <button\n        class=\"str-chat__audio_recorder__complete-button\"\n        data-testid=\"audio-recorder-complete-button\"\n        [disabled]=\"!recording\"\n        (click)=\"uploadRecording()\"\n        (keyup.enter)=\"uploadRecording()\"\n      >\n        <stream-loading-indicator\n          *ngIf=\"isLoading; else sendIcon\"\n        ></stream-loading-indicator>\n        <ng-template #sendIcon>\n          <stream-icon-placeholder icon=\"send\"></stream-icon-placeholder>\n        </ng-template>\n      </button>\n    </ng-container>\n    <ng-template #stopButton>\n      <button\n        class=\"str-chat__audio_recorder__stop-button\"\n        data-testid=\"audio-recorder-stop-button\"\n        [disabled]=\"recordState === MediaRecordingState.STOPPED\"\n        (click)=\"stop()\"\n        (keyup.enter)=\"stop()\"\n      >\n        <stream-icon-placeholder icon=\"delivered\"></stream-icon-placeholder>\n      </button>\n    </ng-template>\n  </div>\n</div>\n", dependencies: [{ kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.VoiceRecordingComponent, selector: "stream-voice-recording", inputs: ["attachment"] }, { kind: "component", type: i4.IconPlaceholderComponent, selector: "stream-icon-placeholder", inputs: ["icon"] }, { kind: "component", type: i5.LoadingIndicatorComponent, selector: "stream-loading-indicator" }, { kind: "component", type: i6.VoiceRecorderWavebarComponent, selector: "stream-voice-recorder-wavebar" }, { kind: "pipe", type: i2.AsyncPipe, name: "async" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.0.4", ngImport: i0, type: VoiceRecorderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'stream-voice-recorder', providers: [], template: "<div\n  class=\"str-chat__audio_recorder-container\"\n  *ngIf=\"voiceRecorderService?.isRecorderVisible$ | async\"\n>\n  <div class=\"str-chat__audio_recorder\" data-testid=\"audio-recorder\">\n    <button\n      class=\"str-chat__audio_recorder__cancel-button\"\n      data-testid=\"cancel-recording-audio-button\"\n      [disabled]=\"isLoading\"\n      (click)=\"cancel()\"\n      (keyup.enter)=\"cancel()\"\n    >\n      <stream-icon-placeholder icon=\"bin\"></stream-icon-placeholder>\n    </button>\n    <stream-voice-recorder-wavebar\n      *ngIf=\"\n        (recordState === MediaRecordingState.RECORDING ||\n          recordState === MediaRecordingState.PAUSED) &&\n        !recording\n      \"\n    ></stream-voice-recorder-wavebar>\n    <!-- eslint-disable @angular-eslint/template/no-any -->\n    <stream-voice-recording\n      [attachment]=\"$any(recording)\"\n      *ngIf=\"!!recording\"\n    ></stream-voice-recording>\n    <!-- eslint-enable @angular-eslint/template/no-any -->\n    <button\n      *ngIf=\"recordState === MediaRecordingState.PAUSED && !recording\"\n      class=\"str-chat__audio_recorder__resume-recording-button\"\n      (click)=\"resume()\"\n      (keyup.enter)=\"resume()\"\n    >\n      <stream-icon-placeholder icon=\"mic\"></stream-icon-placeholder>\n    </button>\n    <button\n      *ngIf=\"recordState === MediaRecordingState.RECORDING && !recording\"\n      class=\"str-chat__audio_recorder__pause-recording-button\"\n      data-testid=\"pause-recording-audio-button\"\n      (click)=\"pause()\"\n      (keyup.enter)=\"pause()\"\n    >\n      <stream-icon-placeholder icon=\"pause\"></stream-icon-placeholder>\n    </button>\n    <ng-container\n      *ngIf=\"recordState === MediaRecordingState.STOPPED; else stopButton\"\n    >\n      <button\n        class=\"str-chat__audio_recorder__complete-button\"\n        data-testid=\"audio-recorder-complete-button\"\n        [disabled]=\"!recording\"\n        (click)=\"uploadRecording()\"\n        (keyup.enter)=\"uploadRecording()\"\n      >\n        <stream-loading-indicator\n          *ngIf=\"isLoading; else sendIcon\"\n        ></stream-loading-indicator>\n        <ng-template #sendIcon>\n          <stream-icon-placeholder icon=\"send\"></stream-icon-placeholder>\n        </ng-template>\n      </button>\n    </ng-container>\n    <ng-template #stopButton>\n      <button\n        class=\"str-chat__audio_recorder__stop-button\"\n        data-testid=\"audio-recorder-stop-button\"\n        [disabled]=\"recordState === MediaRecordingState.STOPPED\"\n        (click)=\"stop()\"\n        (keyup.enter)=\"stop()\"\n      >\n        <stream-icon-placeholder icon=\"delivered\"></stream-icon-placeholder>\n      </button>\n    </ng-template>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.AudioRecorderService }]; }, propDecorators: { voiceRecorderService: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidm9pY2UtcmVjb3JkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc3RyZWFtLWNoYXQtYW5ndWxhci9zcmMvbGliL3ZvaWNlLXJlY29yZGVyL3ZvaWNlLXJlY29yZGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3N0cmVhbS1jaGF0LWFuZ3VsYXIvc3JjL2xpYi92b2ljZS1yZWNvcmRlci92b2ljZS1yZWNvcmRlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULEtBQUssR0FLTixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQzs7Ozs7Ozs7QUFLdkQ7O0dBRUc7QUFPSCxNQUFNLE9BQU8sc0JBQXNCO0lBU2pDLFlBQTRCLFFBQThCO1FBQTlCLGFBQVEsR0FBUixRQUFRLENBQXNCO1FBUDFELGdCQUFXLEdBQXdCLG1CQUFtQixDQUFDLE9BQU8sQ0FBQztRQUMvRCxjQUFTLEdBQUcsS0FBSyxDQUFDO1FBRVQsd0JBQW1CLEdBQUcsbUJBQW1CLENBQUM7UUFDM0Msa0JBQWEsR0FBbUIsRUFBRSxDQUFDO0lBR2tCLENBQUM7SUFFOUQsUUFBUTtRQUNOLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUM1QyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztZQUNyQixJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssbUJBQW1CLENBQUMsS0FBSyxFQUFFO2dCQUNsRCxJQUFJLENBQUMsb0JBQW9CLEVBQUUsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzNEO1FBQ0gsQ0FBQyxDQUFDLENBQ0gsQ0FBQztJQUNKLENBQUM7SUFFRCxXQUFXLENBQUMsT0FBc0I7UUFDaEMsSUFBSSxPQUFPLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFO1lBQzdELElBQUksQ0FBQyxxQkFBcUI7Z0JBQ3hCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRTtvQkFDbkUsSUFBSSxDQUFDLFNBQVMsRUFBRTt3QkFDZCxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQzt3QkFDM0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7cUJBQ3hCO2dCQUNILENBQUMsQ0FBQyxDQUFDO1NBQ047YUFBTTtZQUNMLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxXQUFXLEVBQUUsQ0FBQztTQUMzQztJQUNILENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFRCxNQUFNO1FBQ0osSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1NBQzVCO2FBQU07WUFDTCxLQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7U0FDM0M7UUFDRCxJQUFJLENBQUMsb0JBQW9CLEVBQUUsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxLQUFLLENBQUMsSUFBSTtRQUNSLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzlDLENBQUM7SUFFRCxLQUFLO1FBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRUQsTUFBTTtRQUNKLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVELGVBQWU7UUFDYixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNuQixPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN0QixJQUFJLENBQUMsb0JBQW9CLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDN0QsQ0FBQzs7bUhBbkVVLHNCQUFzQjt1R0FBdEIsc0JBQXNCLDBHQUZ0QixFQUFFLCtDQ3JCZixrc0ZBMkVBOzJGRHBEYSxzQkFBc0I7a0JBTmxDLFNBQVM7K0JBQ0UsdUJBQXVCLGFBR3RCLEVBQUU7MkdBR0osb0JBQW9CO3NCQUE1QixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgT25DaGFuZ2VzLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgU2ltcGxlQ2hhbmdlcyxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBdWRpb1JlY29yZGVyU2VydmljZSB9IGZyb20gJy4vYXVkaW8tcmVjb3JkZXIuc2VydmljZSc7XG5pbXBvcnQgeyBNZWRpYVJlY29yZGluZ1N0YXRlIH0gZnJvbSAnLi9tZWRpYS1yZWNvcmRlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEF1ZGlvUmVjb3JkaW5nIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVm9pY2VSZWNvcmRlclNlcnZpY2UgfSBmcm9tICcuLi9tZXNzYWdlLWlucHV0L3ZvaWNlLXJlY29yZGVyLnNlcnZpY2UnO1xuXG4vKipcbiAqIFRoZSBgVm9pY2VSZWNvcmRlckNvbXBvbmVudGAgbWFrZXMgaXQgcG9zc2libGUgdG8gcmVjb3JkIGF1ZGlvLCBhbmQgdGhlbiB1cGxvYWQgaXQgYXMgYSB2b2ljZSByZWNvcmRpbmcgYXR0YWNobWVudFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzdHJlYW0tdm9pY2UtcmVjb3JkZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vdm9pY2UtcmVjb3JkZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZXM6IFtdLFxuICBwcm92aWRlcnM6IFtdLFxufSlcbmV4cG9ydCBjbGFzcyBWb2ljZVJlY29yZGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3ksIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIHZvaWNlUmVjb3JkZXJTZXJ2aWNlPzogVm9pY2VSZWNvcmRlclNlcnZpY2U7XG4gIHJlY29yZFN0YXRlOiBNZWRpYVJlY29yZGluZ1N0YXRlID0gTWVkaWFSZWNvcmRpbmdTdGF0ZS5TVE9QUEVEO1xuICBpc0xvYWRpbmcgPSBmYWxzZTtcbiAgcmVjb3JkaW5nPzogQXVkaW9SZWNvcmRpbmc7XG4gIHJlYWRvbmx5IE1lZGlhUmVjb3JkaW5nU3RhdGUgPSBNZWRpYVJlY29yZGluZ1N0YXRlO1xuICBwcml2YXRlIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XG4gIHByaXZhdGUgaXNWaXNpYmxlU3Vic2NyaXB0aW9uPzogU3Vic2NyaXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSByZWNvcmRlcjogQXVkaW9SZWNvcmRlclNlcnZpY2UpIHt9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICB0aGlzLnJlY29yZGVyLnJlY29yZGluZ1N0YXRlJC5zdWJzY3JpYmUoKHMpID0+IHtcbiAgICAgICAgdGhpcy5yZWNvcmRTdGF0ZSA9IHM7XG4gICAgICAgIGlmICh0aGlzLnJlY29yZFN0YXRlID09PSBNZWRpYVJlY29yZGluZ1N0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgdGhpcy52b2ljZVJlY29yZGVyU2VydmljZT8uaXNSZWNvcmRlclZpc2libGUkLm5leHQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZXMudm9pY2VSZWNvcmRlclNlcnZpY2UgJiYgdGhpcy52b2ljZVJlY29yZGVyU2VydmljZSkge1xuICAgICAgdGhpcy5pc1Zpc2libGVTdWJzY3JpcHRpb24gPVxuICAgICAgICB0aGlzLnZvaWNlUmVjb3JkZXJTZXJ2aWNlLmlzUmVjb3JkZXJWaXNpYmxlJC5zdWJzY3JpYmUoKGlzVmlzaWJsZSkgPT4ge1xuICAgICAgICAgIGlmICghaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29yZGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pc1Zpc2libGVTdWJzY3JpcHRpb24/LnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goKHMpID0+IHMudW5zdWJzY3JpYmUoKSk7XG4gIH1cblxuICBjYW5jZWwoKSB7XG4gICAgaWYgKHRoaXMucmVjb3JkaW5nKSB7XG4gICAgICB0aGlzLnJlY29yZGluZyA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdm9pZCB0aGlzLnJlY29yZGVyLnN0b3AoeyBjYW5jZWw6IHRydWUgfSk7XG4gICAgfVxuICAgIHRoaXMudm9pY2VSZWNvcmRlclNlcnZpY2U/LmlzUmVjb3JkZXJWaXNpYmxlJC5uZXh0KGZhbHNlKTtcbiAgfVxuXG4gIGFzeW5jIHN0b3AoKSB7XG4gICAgdGhpcy5yZWNvcmRpbmcgPSBhd2FpdCB0aGlzLnJlY29yZGVyLnN0b3AoKTtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIHRoaXMucmVjb3JkZXIucGF1c2UoKTtcbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICB0aGlzLnJlY29yZGVyLnJlc3VtZSgpO1xuICB9XG5cbiAgdXBsb2FkUmVjb3JkaW5nKCkge1xuICAgIGlmICghdGhpcy5yZWNvcmRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgIHRoaXMudm9pY2VSZWNvcmRlclNlcnZpY2U/LnJlY29yZGluZyQubmV4dCh0aGlzLnJlY29yZGluZyk7XG4gIH1cbn1cbiIsIjxkaXZcbiAgY2xhc3M9XCJzdHItY2hhdF9fYXVkaW9fcmVjb3JkZXItY29udGFpbmVyXCJcbiAgKm5nSWY9XCJ2b2ljZVJlY29yZGVyU2VydmljZT8uaXNSZWNvcmRlclZpc2libGUkIHwgYXN5bmNcIlxuPlxuICA8ZGl2IGNsYXNzPVwic3RyLWNoYXRfX2F1ZGlvX3JlY29yZGVyXCIgZGF0YS10ZXN0aWQ9XCJhdWRpby1yZWNvcmRlclwiPlxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzPVwic3RyLWNoYXRfX2F1ZGlvX3JlY29yZGVyX19jYW5jZWwtYnV0dG9uXCJcbiAgICAgIGRhdGEtdGVzdGlkPVwiY2FuY2VsLXJlY29yZGluZy1hdWRpby1idXR0b25cIlxuICAgICAgW2Rpc2FibGVkXT1cImlzTG9hZGluZ1wiXG4gICAgICAoY2xpY2spPVwiY2FuY2VsKClcIlxuICAgICAgKGtleXVwLmVudGVyKT1cImNhbmNlbCgpXCJcbiAgICA+XG4gICAgICA8c3RyZWFtLWljb24tcGxhY2Vob2xkZXIgaWNvbj1cImJpblwiPjwvc3RyZWFtLWljb24tcGxhY2Vob2xkZXI+XG4gICAgPC9idXR0b24+XG4gICAgPHN0cmVhbS12b2ljZS1yZWNvcmRlci13YXZlYmFyXG4gICAgICAqbmdJZj1cIlxuICAgICAgICAocmVjb3JkU3RhdGUgPT09IE1lZGlhUmVjb3JkaW5nU3RhdGUuUkVDT1JESU5HIHx8XG4gICAgICAgICAgcmVjb3JkU3RhdGUgPT09IE1lZGlhUmVjb3JkaW5nU3RhdGUuUEFVU0VEKSAmJlxuICAgICAgICAhcmVjb3JkaW5nXG4gICAgICBcIlxuICAgID48L3N0cmVhbS12b2ljZS1yZWNvcmRlci13YXZlYmFyPlxuICAgIDwhLS0gZXNsaW50LWRpc2FibGUgQGFuZ3VsYXItZXNsaW50L3RlbXBsYXRlL25vLWFueSAtLT5cbiAgICA8c3RyZWFtLXZvaWNlLXJlY29yZGluZ1xuICAgICAgW2F0dGFjaG1lbnRdPVwiJGFueShyZWNvcmRpbmcpXCJcbiAgICAgICpuZ0lmPVwiISFyZWNvcmRpbmdcIlxuICAgID48L3N0cmVhbS12b2ljZS1yZWNvcmRpbmc+XG4gICAgPCEtLSBlc2xpbnQtZW5hYmxlIEBhbmd1bGFyLWVzbGludC90ZW1wbGF0ZS9uby1hbnkgLS0+XG4gICAgPGJ1dHRvblxuICAgICAgKm5nSWY9XCJyZWNvcmRTdGF0ZSA9PT0gTWVkaWFSZWNvcmRpbmdTdGF0ZS5QQVVTRUQgJiYgIXJlY29yZGluZ1wiXG4gICAgICBjbGFzcz1cInN0ci1jaGF0X19hdWRpb19yZWNvcmRlcl9fcmVzdW1lLXJlY29yZGluZy1idXR0b25cIlxuICAgICAgKGNsaWNrKT1cInJlc3VtZSgpXCJcbiAgICAgIChrZXl1cC5lbnRlcik9XCJyZXN1bWUoKVwiXG4gICAgPlxuICAgICAgPHN0cmVhbS1pY29uLXBsYWNlaG9sZGVyIGljb249XCJtaWNcIj48L3N0cmVhbS1pY29uLXBsYWNlaG9sZGVyPlxuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b25cbiAgICAgICpuZ0lmPVwicmVjb3JkU3RhdGUgPT09IE1lZGlhUmVjb3JkaW5nU3RhdGUuUkVDT1JESU5HICYmICFyZWNvcmRpbmdcIlxuICAgICAgY2xhc3M9XCJzdHItY2hhdF9fYXVkaW9fcmVjb3JkZXJfX3BhdXNlLXJlY29yZGluZy1idXR0b25cIlxuICAgICAgZGF0YS10ZXN0aWQ9XCJwYXVzZS1yZWNvcmRpbmctYXVkaW8tYnV0dG9uXCJcbiAgICAgIChjbGljayk9XCJwYXVzZSgpXCJcbiAgICAgIChrZXl1cC5lbnRlcik9XCJwYXVzZSgpXCJcbiAgICA+XG4gICAgICA8c3RyZWFtLWljb24tcGxhY2Vob2xkZXIgaWNvbj1cInBhdXNlXCI+PC9zdHJlYW0taWNvbi1wbGFjZWhvbGRlcj5cbiAgICA8L2J1dHRvbj5cbiAgICA8bmctY29udGFpbmVyXG4gICAgICAqbmdJZj1cInJlY29yZFN0YXRlID09PSBNZWRpYVJlY29yZGluZ1N0YXRlLlNUT1BQRUQ7IGVsc2Ugc3RvcEJ1dHRvblwiXG4gICAgPlxuICAgICAgPGJ1dHRvblxuICAgICAgICBjbGFzcz1cInN0ci1jaGF0X19hdWRpb19yZWNvcmRlcl9fY29tcGxldGUtYnV0dG9uXCJcbiAgICAgICAgZGF0YS10ZXN0aWQ9XCJhdWRpby1yZWNvcmRlci1jb21wbGV0ZS1idXR0b25cIlxuICAgICAgICBbZGlzYWJsZWRdPVwiIXJlY29yZGluZ1wiXG4gICAgICAgIChjbGljayk9XCJ1cGxvYWRSZWNvcmRpbmcoKVwiXG4gICAgICAgIChrZXl1cC5lbnRlcik9XCJ1cGxvYWRSZWNvcmRpbmcoKVwiXG4gICAgICA+XG4gICAgICAgIDxzdHJlYW0tbG9hZGluZy1pbmRpY2F0b3JcbiAgICAgICAgICAqbmdJZj1cImlzTG9hZGluZzsgZWxzZSBzZW5kSWNvblwiXG4gICAgICAgID48L3N0cmVhbS1sb2FkaW5nLWluZGljYXRvcj5cbiAgICAgICAgPG5nLXRlbXBsYXRlICNzZW5kSWNvbj5cbiAgICAgICAgICA8c3RyZWFtLWljb24tcGxhY2Vob2xkZXIgaWNvbj1cInNlbmRcIj48L3N0cmVhbS1pY29uLXBsYWNlaG9sZGVyPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgPC9idXR0b24+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPG5nLXRlbXBsYXRlICNzdG9wQnV0dG9uPlxuICAgICAgPGJ1dHRvblxuICAgICAgICBjbGFzcz1cInN0ci1jaGF0X19hdWRpb19yZWNvcmRlcl9fc3RvcC1idXR0b25cIlxuICAgICAgICBkYXRhLXRlc3RpZD1cImF1ZGlvLXJlY29yZGVyLXN0b3AtYnV0dG9uXCJcbiAgICAgICAgW2Rpc2FibGVkXT1cInJlY29yZFN0YXRlID09PSBNZWRpYVJlY29yZGluZ1N0YXRlLlNUT1BQRURcIlxuICAgICAgICAoY2xpY2spPVwic3RvcCgpXCJcbiAgICAgICAgKGtleXVwLmVudGVyKT1cInN0b3AoKVwiXG4gICAgICA+XG4gICAgICAgIDxzdHJlYW0taWNvbi1wbGFjZWhvbGRlciBpY29uPVwiZGVsaXZlcmVkXCI+PC9zdHJlYW0taWNvbi1wbGFjZWhvbGRlcj5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=